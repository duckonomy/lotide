16
{"last_modification_time":1572485085,"language":1,"import_file":"/home/duckonomy/Development/Git/cquery/third_party/reproc/src/c/posix/fork.c","args_hash":11184243650414851951,"includes":[{"line":0,"resolved_path":"/home/duckonomy/Development/Git/cquery/third_party/reproc/src/c/posix/fork.h"},{"line":2,"resolved_path":"/home/duckonomy/Development/Git/cquery/third_party/reproc/src/c/posix/pipe.h"},{"line":4,"resolved_path":"/usr/include/assert.h"},{"line":5,"resolved_path":"/usr/include/errno.h"},{"line":6,"resolved_path":"/usr/include/sys/wait.h"},{"line":7,"resolved_path":"/usr/include/unistd.h"}],"dependencies":["/home/duckonomy/Development/Git/cquery/third_party/reproc/src/c/posix/fork.h","/usr/include/sys/types.h","/usr/include/features.h","/usr/include/sys/cdefs.h","/usr/include/gnu/stubs.h","/usr/include/bits/types.h","/usr/include/bits/types/clock_t.h","/usr/include/bits/types/clockid_t.h","/usr/include/bits/types/time_t.h","/usr/include/bits/types/timer_t.h","/usr/include/bits/stdint-intn.h","/usr/include/endian.h","/usr/include/bits/byteswap.h","/usr/include/bits/uintn-identity.h","/usr/include/sys/select.h","/usr/include/bits/select.h","/usr/include/bits/types/sigset_t.h","/usr/include/bits/types/struct_timeval.h","/usr/include/bits/types/struct_timespec.h","/usr/include/bits/pthreadtypes.h","/usr/include/bits/thread-shared-types.h","/usr/include/bits/pthreadtypes-arch.h","/usr/lib/clang/7.0.0/include/stddef.h","/usr/include/bits/types/__sigset_t.h","/usr/include/stdc-predef.h","/usr/include/bits/wordsize.h","/usr/include/gnu/stubs-64.h","/usr/include/bits/timesize.h","/usr/include/bits/typesizes.h","/usr/include/bits/time64.h","/usr/include/bits/endian.h"],"skipped_by_preprocessor":[],"types":[{"id":0,"usr":17,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[0,3,4,5,7,9,11,12,13,14,19,21,22],"uses":[]},{"id":1,"usr":13,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[1,2],"uses":[]},{"id":2,"usr":13646527443270226030,"detailed_name":"pid_t","short_name_offset":0,"short_name_size":5,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[6,8,16,17,18],"uses":["12:67-12:72|-1|1|4","29:3-29:8|-1|1|4","187:54-187:59|-1|1|4","188:27-188:32|-1|1|4","194:3-194:8|-1|1|4"]},{"id":3,"usr":9,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[10,15,20],"uses":[]},{"id":4,"usr":9845685975729767257,"detailed_name":"timeval","short_name_offset":0,"short_name_size":7,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[23],"uses":["225:12-225:19|-1|1|4"]}],"funcs":[{"id":0,"usr":8018523282861593088,"detailed_name":"int fork_exec_redirect(int argc, const char *const *argv, const char *working_directory, int stdin_pipe, int stdout_pipe, int stderr_pipe, pid_t *pid)","short_name_offset":4,"short_name_size":18,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"10:14-10:32|-1|1|2","extent":"10:1-181:2|-1|1|0","bases":[],"derived":[],"vars":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],"uses":[],"callees":[]},{"id":1,"usr":18076225669069016173,"detailed_name":"int fork_timeout(unsigned int milliseconds, pid_t process_group, pid_t *pid)","short_name_offset":4,"short_name_size":12,"kind":12,"storage":1,"hover":"","comments":"This code is the same as above except for the code that gets executed inside\nthe fork. If C had closures this duplication wouldn't be necessary. Comments\noutside the fork are also removed here so check the above function for more\ninformation about the logic.","declarations":[],"spell":"187:14-187:26|-1|1|2","extent":"187:1-283:2|-1|1|0","bases":[],"derived":[],"vars":[15,16,17,18,19,20,21,22,23],"uses":[],"callees":[]}],"vars":[{"id":0,"usr":16715413520540745716,"detailed_name":"int argc","short_name_offset":4,"short_name_size":4,"hover":"","comments":"","declarations":[],"spell":"10:37-10:41|0|3|2","extent":"10:33-10:41|0|3|0","type":0,"uses":["14:10-14:14|0|3|12","18:23-18:27|0|3|12"],"kind":253,"storage":1},{"id":1,"usr":17585123342067028927,"detailed_name":"const char *const *argv","short_name_offset":19,"short_name_size":4,"hover":"","comments":"","declarations":[],"spell":"10:62-10:66|0|3|2","extent":"10:43-10:66|0|3|0","type":1,"uses":["15:10-15:14|0|3|12","19:12-19:16|0|3|12","109:12-109:16|0|3|12","109:31-109:35|0|3|12"],"kind":253,"storage":1},{"id":2,"usr":978810508629398771,"detailed_name":"const char *working_directory","short_name_offset":12,"short_name_size":17,"hover":"","comments":"","declarations":[],"spell":"11:45-11:62|0|3|2","extent":"11:33-11:62|0|3|0","type":1,"uses":["74:9-74:26|0|3|12","74:36-74:53|0|3|12"],"kind":253,"storage":1},{"id":3,"usr":12765899419853577492,"detailed_name":"int stdin_pipe","short_name_offset":4,"short_name_size":10,"hover":"","comments":"","declarations":[],"spell":"11:68-11:78|0|3|2","extent":"11:64-11:78|0|3|0","type":0,"uses":["22:10-22:20|0|3|12"],"kind":253,"storage":1},{"id":4,"usr":6776386446474962134,"detailed_name":"int stdout_pipe","short_name_offset":4,"short_name_size":11,"hover":"","comments":"","declarations":[],"spell":"12:37-12:48|0|3|2","extent":"12:33-12:48|0|3|0","type":0,"uses":["23:10-23:21|0|3|12"],"kind":253,"storage":1},{"id":5,"usr":18360527890934130313,"detailed_name":"int stderr_pipe","short_name_offset":4,"short_name_size":11,"hover":"","comments":"","declarations":[],"spell":"12:54-12:65|0|3|2","extent":"12:50-12:65|0|3|0","type":0,"uses":["24:10-24:21|0|3|12"],"kind":253,"storage":1},{"id":6,"usr":12426499091406982357,"detailed_name":"pid_t *pid","short_name_offset":7,"short_name_size":3,"hover":"","comments":"","declarations":[],"spell":"12:74-12:77|0|3|2","extent":"12:67-12:77|0|3|0","type":2,"uses":["25:10-25:13|0|3|12","179:4-179:7|0|3|12"],"kind":253,"storage":1},{"id":7,"usr":3835935949844121133,"detailed_name":"int i","short_name_offset":4,"short_name_size":1,"hover":"int i = 0","comments":"","declarations":[],"spell":"18:12-18:13|0|3|2","extent":"18:8-18:17|0|3|0","type":0,"uses":["18:19-18:20|0|3|12","18:29-18:30|0|3|28","19:17-19:18|0|3|12"],"kind":13,"storage":1},{"id":8,"usr":15541240030233255685,"detailed_name":"pid_t exec_pid","short_name_offset":6,"short_name_size":8,"hover":"pid_t exec_pid = 0","comments":"","declarations":[],"spell":"29:9-29:17|0|3|2","extent":"29:3-29:21|0|3|0","type":2,"uses":["42:3-42:11|0|3|20","44:7-44:15|0|3|12","54:7-54:15|0|3|12","179:10-179:18|0|3|12"],"kind":13,"storage":1},{"id":9,"usr":9531090470391247246,"detailed_name":"int exec_error","short_name_offset":4,"short_name_size":10,"hover":"int exec_error = 0","comments":"","declarations":[],"spell":"30:7-30:17|0|3|2","extent":"30:3-30:21|0|3|0","type":0,"uses":["148:7-148:17|0|3|12","152:13-152:23|0|3|12"],"kind":13,"storage":1},{"id":10,"usr":18069274227796120879,"detailed_name":"unsigned int bytes_read","short_name_offset":13,"short_name_size":10,"hover":"unsigned int bytes_read = 0","comments":"","declarations":[],"spell":"31:16-31:26|0|3|2","extent":"31:3-31:30|0|3|0","type":3,"uses":[],"kind":13,"storage":1},{"id":11,"usr":13752883567592233708,"detailed_name":"int error_pipe_read","short_name_offset":4,"short_name_size":15,"hover":"int error_pipe_read = 0","comments":"We create an error pipe to receive pre-exec and exec errors from the child\nprocess. See this answer https://stackoverflow.com/a/1586277 for more\ninformation.","declarations":[],"spell":"36:7-36:22|0|3|2","extent":"36:3-36:26|0|3|0","type":0,"uses":["123:15-123:30|0|3|132","168:15-168:30|0|3|132"],"kind":13,"storage":1},{"id":12,"usr":9900987231536282495,"detailed_name":"int error_pipe_write","short_name_offset":4,"short_name_size":16,"hover":"int error_pipe_write = 0","comments":"","declarations":[],"spell":"37:7-37:23|0|3|2","extent":"37:3-37:27|0|3|0","type":0,"uses":["100:16-100:32|0|3|12","119:15-119:31|0|3|132","169:15-169:31|0|3|132"],"kind":13,"storage":1},{"id":13,"usr":9705311035280048632,"detailed_name":"int max_fd","short_name_offset":4,"short_name_size":6,"hover":"","comments":"","declarations":[],"spell":"94:9-94:15|0|3|2","extent":"94:5-94:15|0|3|0","type":0,"uses":["95:25-95:31|0|3|12"],"kind":13,"storage":1},{"id":14,"usr":16138059989531292492,"detailed_name":"int i","short_name_offset":4,"short_name_size":1,"hover":"int i = 3","comments":"","declarations":[],"spell":"95:14-95:15|0|3|2","extent":"95:10-95:19|0|3|0","type":0,"uses":["95:21-95:22|0|3|12","95:33-95:34|0|3|28","100:11-100:12|0|3|12","101:13-101:14|0|3|12"],"kind":13,"storage":1},{"id":15,"usr":13143980084562104863,"detailed_name":"unsigned int milliseconds","short_name_offset":13,"short_name_size":12,"hover":"","comments":"","declarations":[],"spell":"187:40-187:52|1|3|2","extent":"187:27-187:52|1|3|0","type":3,"uses":["190:10-190:22|1|3|12","226:17-226:29|1|3|12","227:19-227:31|1|3|12"],"kind":253,"storage":1},{"id":16,"usr":17621615735057038011,"detailed_name":"pid_t process_group","short_name_offset":6,"short_name_size":13,"hover":"","comments":"","declarations":[],"spell":"187:60-187:73|1|3|2","extent":"187:54-187:73|1|3|0","type":2,"uses":["220:20-220:33|1|3|12"],"kind":253,"storage":1},{"id":17,"usr":12946855693727949599,"detailed_name":"pid_t *pid","short_name_offset":7,"short_name_size":3,"hover":"","comments":"","declarations":[],"spell":"188:34-188:37|1|3|2","extent":"188:27-188:37|1|3|0","type":2,"uses":["191:10-191:13|1|3|12","281:4-281:7|1|3|12"],"kind":253,"storage":1},{"id":18,"usr":17107386495106295310,"detailed_name":"pid_t timeout_pid","short_name_offset":6,"short_name_size":11,"hover":"pid_t timeout_pid = 0","comments":"","declarations":[],"spell":"194:9-194:20|1|3|2","extent":"194:3-194:24|1|3|0","type":2,"uses":["204:3-204:14|1|3|20","206:7-206:18|1|3|12","216:7-216:18|1|3|12","281:10-281:21|1|3|12"],"kind":13,"storage":1},{"id":19,"usr":11550133406356093495,"detailed_name":"int timeout_error","short_name_offset":4,"short_name_size":13,"hover":"int timeout_error = 0","comments":"","declarations":[],"spell":"195:7-195:20|1|3|2","extent":"195:3-195:24|1|3|0","type":0,"uses":["259:7-259:20|1|3|12","262:13-262:26|1|3|12"],"kind":13,"storage":1},{"id":20,"usr":3739395083516716617,"detailed_name":"unsigned int bytes_read","short_name_offset":13,"short_name_size":10,"hover":"unsigned int bytes_read = 0","comments":"","declarations":[],"spell":"196:16-196:26|1|3|2","extent":"196:3-196:30|1|3|0","type":3,"uses":[],"kind":13,"storage":1},{"id":21,"usr":6369992123771935992,"detailed_name":"int error_pipe_read","short_name_offset":4,"short_name_size":15,"hover":"int error_pipe_read = 0","comments":"","declarations":[],"spell":"198:7-198:22|1|3|2","extent":"198:3-198:26|1|3|0","type":0,"uses":["217:17-217:32|1|3|132","245:15-245:30|1|3|132","272:15-272:30|1|3|132"],"kind":13,"storage":1},{"id":22,"usr":4075641611908791938,"detailed_name":"int error_pipe_write","short_name_offset":4,"short_name_size":16,"hover":"int error_pipe_write = 0","comments":"","declarations":[],"spell":"199:7-199:23|1|3|2","extent":"199:3-199:27|1|3|0","type":0,"uses":["231:17-231:33|1|3|132","241:15-241:31|1|3|132","273:15-273:31|1|3|132"],"kind":13,"storage":1},{"id":23,"usr":9453285290880602066,"detailed_name":"struct timeval tv","short_name_offset":15,"short_name_size":2,"hover":"","comments":"","declarations":[],"spell":"225:20-225:22|1|3|2","extent":"225:5-225:22|1|3|0","type":4,"uses":["226:5-226:7|1|3|4","227:5-227:7|1|3|4"],"kind":13,"storage":1},{"id":24,"usr":10637932367675723767,"detailed_name":"","short_name_offset":0,"short_name_size":0,"hover":"","comments":"","declarations":[],"uses":["226:8-226:14|1|3|20"],"kind":0,"storage":0},{"id":25,"usr":2643650117647240421,"detailed_name":"","short_name_offset":0,"short_name_size":0,"hover":"","comments":"","declarations":[],"uses":["227:8-227:15|1|3|20"],"kind":0,"storage":0}]}