16
{"last_modification_time":1574089038,"language":2,"import_file":"/home/duckonomy/Development/gRPC/grpc/src/core/lib/iomgr/timer_manager.cc","args_hash":8583860895283344595,"includes":[{"line":18,"resolved_path":"/usr/include/grpc/support/port_platform.h"},{"line":22,"resolved_path":"/usr/lib/clang/7.0.0/include/inttypes.h"},{"line":24,"resolved_path":"/usr/include/grpc/support/alloc.h"},{"line":25,"resolved_path":"/usr/include/grpc/support/log.h"}],"dependencies":["/usr/include/grpc/support/port_platform.h","/usr/include/grpc/impl/codegen/port_platform.h","/usr/include/features.h","/usr/include/sys/cdefs.h","/usr/include/gnu/stubs.h","/usr/lib/clang/7.0.0/include/stdint.h","/usr/include/stdint.h","/usr/include/bits/libc-header-start.h","/usr/include/bits/types.h","/usr/include/bits/stdint-intn.h","/usr/include/bits/stdint-uintn.h","/usr/lib/clang/7.0.0/include/inttypes.h","/usr/include/stdc-predef.h","/usr/include/bits/wordsize.h","/usr/include/gnu/stubs-64.h","/usr/include/linux/version.h","/usr/include/bits/timesize.h","/usr/include/bits/typesizes.h","/usr/include/bits/time64.h","/usr/include/bits/wchar.h"],"skipped_by_preprocessor":[],"types":[{"id":0,"usr":9205277713717355822,"detailed_name":"completed_thread","short_name_offset":0,"short_name_size":16,"kind":23,"hover":"","comments":"","declarations":[],"spell":"32:8-32:24|-1|1|2","extent":"32:1-35:2|-1|1|0","bases":[],"derived":[],"types":[],"funcs":[],"vars":[0,1],"instances":[1,9,15,16,17,23],"uses":["34:3-34:19|-1|1|4","52:8-52:24|-1|1|4","69:5-69:21|-1|1|4","74:7-74:23|-1|1|4","90:3-90:19|-1|1|4","263:34-263:50|-1|1|4","286:36-286:52|-1|1|4"]},{"id":1,"usr":17,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[0,2,3,5,6,7,8,12,18,19,21,22],"uses":[]},{"id":2,"usr":3,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[4,10,11,25],"uses":[]},{"id":3,"usr":7879307647860853359,"detailed_name":"uint64_t","short_name_offset":0,"short_name_size":8,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[13,14,20],"uses":["61:8-61:16|-1|1|4","63:8-63:16|-1|1|4","173:5-173:13|-1|1|4","363:1-363:9|-1|1|4"]},{"id":4,"usr":2,"detailed_name":"","short_name_offset":0,"short_name_size":0,"kind":0,"hover":"","comments":"","declarations":[],"bases":[],"derived":[],"types":[],"funcs":[],"vars":[],"instances":[24],"uses":[]}],"funcs":[{"id":0,"usr":9956014427461965168,"detailed_name":"static void timer_thread(void *completed_thread_ptr)","short_name_offset":12,"short_name_size":12,"kind":12,"storage":3,"hover":"","comments":"","declarations":[{"spell":"65:13-65:25|-1|1|1","param_spellings":["65:32-65:52"]}],"spell":"280:13-280:25|-1|1|2","extent":"280:1-287:2|-1|1|0","bases":[],"derived":[],"vars":[24],"uses":[],"callees":["284:3-284:18|6|3|36","286:3-286:23|7|3|36"]},{"id":1,"usr":9398936824885136726,"detailed_name":"static void gc_completed_threads()","short_name_offset":12,"short_name_size":20,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"67:13-67:33|-1|1|2","extent":"67:1-80:2|-1|1|0","bases":[],"derived":[],"vars":[15,16],"uses":["137:3-137:23|4|3|36","330:7-330:27|10|3|36"],"callees":[]},{"id":2,"usr":11239666038540911988,"detailed_name":"static void start_timer_thread_and_unlock()","short_name_offset":12,"short_name_size":29,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"82:13-82:42|-1|1|2","extent":"82:1-94:2|-1|1|0","bases":[],"derived":[],"vars":[17],"uses":["118:5-118:34|4|3|36","293:5-293:34|8|3|36"],"callees":[]},{"id":3,"usr":4912867563713387725,"detailed_name":"void grpc_timer_manager_tick()","short_name_offset":5,"short_name_size":23,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"96:6-96:29|-1|1|2","extent":"96:1-99:2|-1|1|0","bases":[],"derived":[],"vars":[18],"uses":[],"callees":[]},{"id":4,"usr":9899658930749464533,"detailed_name":"static void run_some_timers()","short_name_offset":12,"short_name_size":15,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"101:13-101:28|-1|1|2","extent":"101:1-141:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":[],"callees":["118:5-118:34|2|3|36","137:3-137:23|1|3|36"]},{"id":5,"usr":11211835188021922580,"detailed_name":"static bool wait_until(int next)","short_name_offset":12,"short_name_size":10,"kind":12,"storage":3,"hover":"","comments":"wait until 'next' (or forever if there is already a timed waiter in the pool)\nreturns true if the thread should continue executing (false if it should\nshutdown)","declarations":[],"spell":"146:13-146:23|-1|1|2","extent":"146:1-227:2|-1|1|0","bases":[],"derived":[],"vars":[19,20,21],"uses":[],"callees":[]},{"id":6,"usr":17115935940816976611,"detailed_name":"static void timer_main_loop()","short_name_offset":12,"short_name_size":15,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"229:13-229:28|-1|1|2","extent":"229:1-261:2|-1|1|0","bases":[],"derived":[],"vars":[22],"uses":["284:3-284:18|0|3|36"],"callees":[]},{"id":7,"usr":7496436947960444280,"detailed_name":"static void timer_thread_cleanup(completed_thread *ct)","short_name_offset":12,"short_name_size":20,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"263:13-263:33|-1|1|2","extent":"263:1-278:2|-1|1|0","bases":[],"derived":[],"vars":[23],"uses":["286:3-286:23|0|3|36"],"callees":[]},{"id":8,"usr":6375784272263398500,"detailed_name":"static void start_threads()","short_name_offset":12,"short_name_size":13,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"289:13-289:26|-1|1|2","extent":"289:1-297:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":["311:3-311:16|9|3|36","347:5-347:18|12|3|36"],"callees":["293:5-293:34|2|3|36"]},{"id":9,"usr":10678602577561348224,"detailed_name":"void grpc_timer_manager_init()","short_name_offset":5,"short_name_size":23,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"299:6-299:29|-1|1|2","extent":"299:1-312:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":[],"callees":["311:3-311:16|8|3|36"]},{"id":10,"usr":4307470399081434548,"detailed_name":"static void stop_threads()","short_name_offset":12,"short_name_size":12,"kind":12,"storage":3,"hover":"","comments":"","declarations":[],"spell":"314:13-314:25|-1|1|2","extent":"314:1-335:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":["338:3-338:15|11|3|36","349:5-349:17|12|3|36"],"callees":["330:7-330:27|1|3|36"]},{"id":11,"usr":5156778554485297200,"detailed_name":"void grpc_timer_manager_shutdown()","short_name_offset":5,"short_name_size":27,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"337:6-337:33|-1|1|2","extent":"337:1-343:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":[],"callees":["338:3-338:15|10|3|36"]},{"id":12,"usr":13977491557342680884,"detailed_name":"void grpc_timer_manager_set_threading(bool threaded)","short_name_offset":5,"short_name_size":32,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"345:6-345:38|-1|1|2","extent":"345:1-351:2|-1|1|0","bases":[],"derived":[],"vars":[25],"uses":[],"callees":["347:5-347:18|8|3|36","349:5-349:17|10|3|36"]},{"id":13,"usr":658100093524997469,"detailed_name":"void grpc_kick_poller()","short_name_offset":5,"short_name_size":16,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"353:6-353:22|-1|1|2","extent":"353:1-361:2|-1|1|0","bases":[],"derived":[],"vars":[],"uses":[],"callees":[]},{"id":14,"usr":12385691318577435551,"detailed_name":"uint64_t grpc_timer_manager_get_wakeups_testonly()","short_name_offset":9,"short_name_size":39,"kind":12,"storage":1,"hover":"","comments":"","declarations":[],"spell":"363:10-363:49|-1|1|2","extent":"363:1-363:77|-1|1|0","bases":[],"derived":[],"vars":[],"uses":[],"callees":[]}],"vars":[{"id":0,"usr":15321235693454993331,"detailed_name":"int completed_thread::thd","short_name_offset":22,"short_name_size":3,"hover":"","comments":"","declarations":[],"spell":"33:21-33:24|0|2|2","extent":"33:3-33:24|0|2|0","type":1,"uses":[],"kind":8,"storage":0},{"id":1,"usr":1906681072530651656,"detailed_name":"completed_thread *completed_thread::next","short_name_offset":36,"short_name_size":4,"hover":"","comments":"","declarations":[],"spell":"34:21-34:25|0|2|2","extent":"34:3-34:25|0|2|0","type":0,"uses":["74:39-74:43|1|3|12","272:7-272:11|7|3|20"],"kind":8,"storage":0},{"id":2,"usr":743037268203822838,"detailed_name":"int grpc_timer_check_trace","short_name_offset":4,"short_name_size":22,"hover":"","comments":"","declarations":["37:29-37:51|-1|1|1"],"type":1,"uses":[],"kind":13,"storage":2},{"id":3,"usr":15986865142021524078,"detailed_name":"int g_mu","short_name_offset":4,"short_name_size":4,"hover":"","comments":"global mutex","declarations":[],"spell":"40:15-40:19|-1|1|2","extent":"40:1-40:19|-1|1|0","type":1,"uses":[],"kind":13,"storage":3},{"id":4,"usr":8592299585259623461,"detailed_name":"bool g_threaded","short_name_offset":5,"short_name_size":10,"hover":"","comments":"are we multi-threaded","declarations":[],"spell":"42:13-42:23|-1|1|2","extent":"42:1-42:23|-1|1|0","type":2,"uses":["114:30-114:40|4|3|12","149:8-149:18|5|3|12","291:8-291:18|8|3|12","292:5-292:15|8|3|20","303:3-303:13|9|3|20","319:7-319:17|10|3|12","320:5-320:15|10|3|20"],"kind":13,"storage":3},{"id":5,"usr":2236754859894553805,"detailed_name":"int g_cv_wait","short_name_offset":4,"short_name_size":9,"hover":"","comments":"cv to wait until a thread is needed","declarations":[],"spell":"44:15-44:24|-1|1|2","extent":"44:1-44:24|-1|1|0","type":1,"uses":[],"kind":13,"storage":3},{"id":6,"usr":4141548742922703824,"detailed_name":"int g_cv_shutdown","short_name_offset":4,"short_name_size":13,"hover":"","comments":"cv for notification when threading ends","declarations":[],"spell":"46:15-46:28|-1|1|2","extent":"46:1-46:28|-1|1|0","type":1,"uses":[],"kind":13,"storage":3},{"id":7,"usr":17520485446978502953,"detailed_name":"int g_thread_count","short_name_offset":4,"short_name_size":14,"hover":"","comments":"number of threads in the system","declarations":[],"spell":"48:12-48:26|-1|1|2","extent":"48:1-48:26|-1|1|0","type":1,"uses":["85:5-85:19|2|3|28","268:5-268:19|7|3|28","269:12-269:26|7|3|12","304:3-304:17|9|3|20","325:12-325:26|10|3|12"],"kind":13,"storage":3},{"id":8,"usr":15433953719996239752,"detailed_name":"int g_waiter_count","short_name_offset":4,"short_name_size":14,"hover":"","comments":"number of threads sitting around waiting","declarations":[],"spell":"50:12-50:26|-1|1|2","extent":"50:1-50:26|-1|1|0","type":1,"uses":["84:5-84:19|2|3|28","113:5-113:19|4|3|28","114:7-114:21|4|3|12","139:5-139:19|4|3|28","267:5-267:19|7|3|28","305:3-305:17|9|3|20"],"kind":13,"storage":3},{"id":9,"usr":6338597251907873365,"detailed_name":"completed_thread *g_completed_threads","short_name_offset":18,"short_name_size":19,"hover":"","comments":"linked list of threads that have completed (and need joining)","declarations":[],"spell":"52:26-52:45|-1|1|2","extent":"52:1-52:45|-1|1|0","type":0,"uses":["68:7-68:26|1|3|12","69:31-69:50|-1|1|4","70:5-70:24|1|3|20","272:14-272:33|7|3|12","273:3-273:22|7|3|20","306:3-306:22|9|3|20"],"kind":13,"storage":3},{"id":10,"usr":1497681564479757779,"detailed_name":"bool g_kicked","short_name_offset":5,"short_name_size":8,"hover":"","comments":"was the manager kicked by the timer system","declarations":[],"spell":"54:13-54:21|-1|1|2","extent":"54:1-54:21|-1|1|0","type":2,"uses":["160:8-160:16|5|3|12","220:7-220:15|5|3|12","222:5-222:13|5|3|20","355:3-355:11|13|3|20"],"kind":13,"storage":3},{"id":11,"usr":7911961275993172082,"detailed_name":"bool g_has_timed_waiter","short_name_offset":5,"short_name_size":18,"hover":"","comments":"is there a thread waiting until the next timer should fire?","declarations":[],"spell":"56:13-56:31|-1|1|2","extent":"56:1-56:31|-1|1|0","type":2,"uses":["122:10-122:28|4|3|12","183:9-183:27|5|3|20","213:7-213:25|5|3|20","308:3-308:21|9|3|20","356:3-356:21|13|3|20"],"kind":13,"storage":3},{"id":12,"usr":7101790065086575424,"detailed_name":"int g_timed_waiter_deadline","short_name_offset":4,"short_name_size":23,"hover":"","comments":"the deadline of the current timed waiter thread (only relevant if\ng_has_timed_waiter is true)","declarations":[],"spell":"59:20-59:43|-1|1|2","extent":"59:1-59:43|-1|1|0","type":1,"uses":[],"kind":13,"storage":3},{"id":13,"usr":16461661249326746591,"detailed_name":"uint64_t g_timed_waiter_generation","short_name_offset":9,"short_name_size":25,"hover":"","comments":"generation counter to track which thread is waiting for the next timer","declarations":[],"spell":"61:17-61:42|-1|1|2","extent":"61:1-61:42|-1|1|0","type":3,"uses":["173:43-173:68|-1|1|4","182:40-182:65|5|3|28","211:39-211:64|5|3|12","358:5-358:30|13|3|28"],"kind":13,"storage":3},{"id":14,"usr":2915434351254251624,"detailed_name":"uint64_t g_wakeups","short_name_offset":9,"short_name_size":9,"hover":"","comments":"number of timer wakeups","declarations":[],"spell":"63:17-63:26|-1|1|2","extent":"63:1-63:26|-1|1|0","type":3,"uses":["212:9-212:18|5|3|28","333:3-333:12|10|3|20","363:65-363:74|14|3|12"],"kind":13,"storage":3},{"id":15,"usr":1234717796138410471,"detailed_name":"completed_thread *to_gc","short_name_offset":18,"short_name_size":5,"hover":"completed_thread *to_gc = g_completed_threads","comments":"","declarations":[],"spell":"69:23-69:28|1|3|2","extent":"69:5-69:50|1|3|0","type":0,"uses":["72:12-72:17|1|3|12","74:32-74:37|-1|1|4","76:7-76:12|1|3|20"],"kind":13,"storage":1},{"id":16,"usr":7760350466022881222,"detailed_name":"completed_thread *next","short_name_offset":18,"short_name_size":4,"hover":"completed_thread *next = to_gc->next","comments":"","declarations":[],"spell":"74:25-74:29|1|3|2","extent":"74:7-74:43|1|3|0","type":0,"uses":["76:15-76:19|1|3|12"],"kind":13,"storage":1},{"id":17,"usr":5610825077282200205,"detailed_name":"completed_thread *ct","short_name_offset":18,"short_name_size":2,"hover":"","comments":"","declarations":[],"spell":"90:21-90:23|2|3|2","extent":"90:3-90:23|2|3|0","type":0,"uses":[],"kind":13,"storage":1},{"id":18,"usr":11722157321799569436,"detailed_name":"int exec_ctx","short_name_offset":4,"short_name_size":8,"hover":"","comments":"","declarations":[],"spell":"97:22-97:30|3|3|2","extent":"97:3-97:30|3|3|0","type":1,"uses":[],"kind":13,"storage":1},{"id":19,"usr":7080124506086067540,"detailed_name":"int next","short_name_offset":4,"short_name_size":4,"hover":"","comments":"","declarations":[],"spell":"146:36-146:40|5|3|2","extent":"146:24-146:40|5|3|0","type":1,"uses":[],"kind":253,"storage":1},{"id":20,"usr":16683332047417049136,"detailed_name":"uint64_t my_timed_waiter_generation","short_name_offset":9,"short_name_size":26,"hover":"uint64_t my_timed_waiter_generation = g_timed_waiter_generation - 1","comments":"if there's no timed waiter, we should become one: that waiter waits\nonly until the next timer should expire. All other timers wait forever\n\n'g_timed_waiter_generation' is a global generation counter. The idea here\nis that the thread becoming a timed-waiter increments and stores this\nglobal counter locally in 'my_timed_waiter_generation' before going to\nsleep. After waking up, if my_timed_waiter_generation ==\ng_timed_waiter_generation, it can be sure that it was the timed_waiter\nthread (and that no other thread took over while this was asleep)\n\nInitialize my_timed_waiter_generation to some value that is NOT equal to\ng_timed_waiter_generation","declarations":[],"spell":"173:14-173:40|5|3|2","extent":"173:5-173:72|5|3|0","type":3,"uses":["182:9-182:35|5|3|20","211:9-211:35|5|3|12"],"kind":13,"storage":1},{"id":21,"usr":6453244797194718437,"detailed_name":"int wait_time","short_name_offset":4,"short_name_size":9,"hover":"","comments":"","declarations":[],"spell":"187:23-187:32|5|3|2","extent":"187:11-187:32|5|3|0","type":1,"uses":[],"kind":13,"storage":1},{"id":22,"usr":14552788748074716921,"detailed_name":"int next","short_name_offset":4,"short_name_size":4,"hover":"","comments":"","declarations":[],"spell":"231:17-231:21|6|3|2","extent":"231:5-231:21|6|3|0","type":1,"uses":[],"kind":13,"storage":1},{"id":23,"usr":15507785547999173872,"detailed_name":"completed_thread *ct","short_name_offset":18,"short_name_size":2,"hover":"","comments":"","declarations":[],"spell":"263:52-263:54|7|3|2","extent":"263:34-263:54|7|3|0","type":0,"uses":["272:3-272:5|7|3|12","273:25-273:27|7|3|12"],"kind":253,"storage":1},{"id":24,"usr":17035631341547676769,"detailed_name":"void *completed_thread_ptr","short_name_offset":6,"short_name_size":20,"hover":"","comments":"","declarations":[],"spell":"280:32-280:52|0|3|2","extent":"280:26-280:52|0|3|0","type":4,"uses":["286:55-286:75|0|3|12"],"kind":253,"storage":1},{"id":25,"usr":14609771381424182629,"detailed_name":"bool threaded","short_name_offset":5,"short_name_size":8,"hover":"","comments":"","declarations":[],"spell":"345:44-345:52|12|3|2","extent":"345:39-345:52|12|3|0","type":2,"uses":["346:7-346:15|12|3|12"],"kind":253,"storage":1}]}